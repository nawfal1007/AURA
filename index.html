<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>AURA APPAREL | Sustainable Indonesian Luxury</title>
    <meta name="description" content="Official Flagship. Artisanal Indonesian silk, sustainable craft, and liquid glass design.">
    <link rel="icon" type="image/png" href="https://fav.farm/✨">

    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/@alpinejs/intersect@3.x.x/dist/cdn.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.13.3/dist/cdn.min.js"></script>
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <script>
        window.tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        aura: {
                            /* Brand Core */
                            base: '#FBFBF9',       /* Silk Pearl */
                            dark: '#0A1A17',       /* Deep Volcanic Obsidian */
                            accent: '#D4AF37',     /* Artisan Gold Leaf */
                            
                            /* Semantic Accents */
                            glass: 'rgba(255, 255, 255, 0.05)',
                            'glass-border': 'rgba(255, 255, 255, 0.18)',
                            'glass-dark': 'rgba(10, 26, 23, 0.72)',
                            
                            /* Utility */
                            error: '#9B2C2C',      /* Crimson */
                            success: '#2F855A'     /* Forest Green */
                        }
                    },
                    fontFamily: {
                        sans: ['Lato', 'sans-serif'],
                        serif: ['Playfair Display', 'serif'],
                    },
                    animation: {
                        'blob-slow': 'blob 22s infinite alternate ease-in-out',
                        'blob-fast': 'blob 15s infinite alternate-reverse ease-in-out',
                        'glass-slide': 'glassSlide 1.2s cubic-bezier(0.16, 1, 0.3, 1) forwards',
                        'float-y': 'floatY 7s ease-in-out infinite',
                        'shimmer-infinite': 'shimmer 2.5s linear infinite',
                    },
                    keyframes: {
                        blob: {
                            '0%': { transform: 'translate(0px, 0px) scale(1) rotate(0deg)' },
                            '33%': { transform: 'translate(70px, -110px) scale(1.15) rotate(30deg)' },
                            '66%': { transform: 'translate(-90px, 50px) scale(0.85) rotate(-30deg)' },
                            '100%': { transform: 'translate(0px, 0px) scale(1) rotate(0deg)' },
                        },
                        glassSlide: {
                            '0%': { opacity: '0', transform: 'translateY(50px) scale(0.96)', filter: 'blur(15px)' },
                            '100%': { opacity: '1', transform: 'translateY(0) scale(1)', filter: 'blur(0)' }
                        },
                        floatY: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-25px)' }
                        },
                        shimmer: {
                            '0%': { backgroundPosition: '-200% 0' },
                            '100%': { backgroundPosition: '200% 0' }
                        }
                    }
                }
            }
        }
    </script>

    <style>
        /* Global UI Polish */
        [x-cloak] { display: none !important; }
        
        * {
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            cursor: default; /* Reset for custom cursor later if needed */
        }

        /* 1. LIQUID GLASS ARCHITECTURE */
        .glass-refracted {
            background: rgba(255, 255, 255, 0.06);
            backdrop-filter: blur(40px) saturate(200%);
            -webkit-backdrop-filter: blur(40px) saturate(200%);
            border: 1px solid rgba(255, 255, 255, 0.22);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.04);
        }

        .glass-dark-refracted {
            background: rgba(10, 26, 23, 0.8);
            backdrop-filter: blur(35px) saturate(160%);
            -webkit-backdrop-filter: blur(35px) saturate(160%);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 25px 60px rgba(0, 0, 0, 0.25);
        }

        /* 2. THE LIQUID CANVAS (Background Physics) */
        .canvas-liquid-blob {
            position: absolute;
            width: 900px;
            height: 900px;
            filter: blur(140px);
            border-radius: 50%;
            z-index: -1;
            opacity: 0.4;
            pointer-events: none;
            mix-blend-mode: multiply;
        }

        /* 3. PREMIUM SCROLLING */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { 
            background: #0A1A17; 
            border-radius: 10px; 
            border: 1px solid rgba(255,255,255,0.1);
        }

        /* 4. TYPOGRAPHY & INTERACTION */
        .kerning-titan { letter-spacing: 0.5em; }
        
        .nav-link {
            position: relative;
            transition: color 0.5s ease;
        }
        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 50%;
            width: 0;
            height: 1px;
            background: #D4AF37;
            transition: all 0.5s ease;
            transform: translateX(-50%);
        }
        .nav-link:hover::after { width: 100%; }

        .btn-liquid {
            position: relative;
            overflow: hidden;
            transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .btn-liquid::before {
            content: '';
            position: absolute;
            top: 0; left: -100%;
            width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: 0.8s;
        }
        .btn-liquid:hover::before { left: 100%; }

        .vertical-text {
            writing-mode: vertical-rl;
            text-orientation: mixed;
        }
    </style>
</head>

<body class="bg-aura-base text-aura-dark overflow-x-hidden min-h-screen font-sans"
      x-data="auraTitan()">

    <div class="fixed inset-0 z-[-1] overflow-hidden bg-aura-base">
        <div class="canvas-liquid-blob bg-blue-100 top-[-20%] left-[-15%] animate-blob-slow"></div>
        <div class="canvas-liquid-blob bg-aura-accent/20 bottom-[-15%] right-[-10%] animate-blob-fast" style="animation-delay: 2s;"></div>
        <div class="canvas-liquid-blob bg-pink-100 top-[35%] left-[15%] animate-blob-slow" style="animation-delay: 4s;"></div>
        <div class="canvas-liquid-blob bg-emerald-50 bottom-[10%] left-[-20%] animate-blob-fast" style="animation-delay: 7s;"></div>
    </div>


    <div class="fixed top-14 right-10 z-[300] flex flex-col gap-5 pointer-events-none">
        <template x-for="toast in toasts" :key="toast.id">
            <div x-show="toast.visible" 
                 x-transition:enter="transition ease-out duration-600 transform"
                 x-transition:enter-start="opacity-0 translate-x-20 scale-90"
                 x-transition:enter-end="opacity-100 translate-x-0 scale-100"
                 x-transition:leave="transition ease-in duration-400 opacity-0 translate-x-10"
                 class="glass-dark-refracted text-white px-10 py-6 rounded-3xl flex items-center gap-6 min-w-[420px] shadow-2xl pointer-events-auto border-l-4 border-aura-accent">
                
                <div class="w-14 h-14 rounded-full flex items-center justify-center bg-white/5 border border-white/10">
                    <i class="ph-fill ph-sparkle text-aura-accent text-3xl animate-pulse"></i>
                </div>

                <div class="flex-1">
                    <h4 class="text-[10px] font-bold uppercase kerning-titan text-aura-accent mb-1" x-text="toast.title"></h4>
                    <p class="text-sm font-light text-white/80" x-text="toast.message"></p>
                </div>

                <button @click="removeToast(toast.id)" class="text-white/20 hover:text-white transition-colors">
                    <i class="ph ph-x-circle text-2xl"></i>
                </button>
            </div>
        </template>
    </div>


    <header class="fixed top-0 w-full z-[100] transition-all duration-1000 ease-[cubic-bezier(0.16,1,0.3,1)]"
            :class="scrolled ? 'py-5' : 'py-14'">
        
        <div class="container mx-auto px-6">
            <div class="glass-refracted rounded-full px-12 py-6 flex justify-between items-center transition-all duration-1000"
                 :class="scrolled ? 'shadow-2xl translate-y-0' : 'border-transparent bg-transparent backdrop-blur-none shadow-none'">
                
                <div class="flex items-center gap-10 w-1/3">
                    <button @click="mobileMenuOpen = true" class="lg:hidden hover:text-aura-accent transition-transform hover:scale-110 active:scale-95">
                        <i class="ph ph-list text-3xl"></i>
                    </button>
                    
                    <template x-if="isAdmin">
                        <a href="admin.html" class="hidden lg:flex items-center gap-4 bg-aura-dark text-white px-8 py-3 rounded-full text-[10px] font-bold uppercase tracking-[0.3em] shadow-xl hover:bg-aura-accent hover:text-aura-dark transition-all duration-700 btn-liquid group">
                            <i class="ph-fill ph-crown text-aura-accent group-hover:text-aura-dark transition-colors"></i>
                            Admin Console
                        </a>
                    </template>
                    
                    <div x-show="!isAdmin" class="hidden lg:block">
                        <span class="text-[9px] uppercase tracking-[0.6em] text-aura-dark/30">Since 2026</span>
                    </div>
                </div>

                <div class="w-1/3 text-center">
                    <a href="#" class="inline-block relative group">
                        <h1 class="text-3xl md:text-5xl font-serif font-bold tracking-[0.45em] uppercase transition-all duration-1000 group-hover:tracking-[0.6em]">
                            AURA<span class="text-aura-accent">.</span>
                        </h1>
                    </a>
                </div>

                <div class="w-1/3 flex justify-end items-center gap-12">
                    <nav class="hidden lg:flex gap-14 text-[11px] font-bold tracking-[0.3em] uppercase text-gray-400">
                        <a href="catalog.html" class="nav-link hover:text-aura-dark">Collections</a>
                        <template x-if="session">
                            <a href="profile.html" class="text-aura-dark nav-link">Orders</a>
                        </template>
                    </nav>

                    <div class="flex items-center gap-10 border-l border-gray-200 pl-12">
                        <template x-if="!session">
                            <a href="loginpage.html" class="hover:text-aura-accent transition-all duration-500 transform hover:scale-110 active:scale-90" title="Access Account">
                                <i class="ph ph-user-circle text-4xl"></i>
                            </a>
                        </template>
                        <template x-if="session">
                            <button @click="handleLogout" class="hover:text-aura-error transition-all duration-500 transform hover:rotate-90" title="Exit Terminal">
                                <i class="ph ph-sign-out text-4xl"></i>
                            </button>
                        </template>

                        <button @click="cartOpen = true" class="relative group active:scale-90 transition-transform">
                            <i class="ph ph-tote text-4xl group-hover:text-aura-accent transition-colors duration-500"></i>
                            <span x-show="cartCount > 0" 
                                  x-cloak
                                  class="absolute -top-1 -right-1 bg-aura-dark text-aura-accent text-[10px] w-7 h-7 rounded-full flex items-center justify-center font-bold shadow-2xl border-2 border-white animate-bounce" 
                                  x-text="cartCount"></span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <section class="relative min-h-screen flex items-center justify-center pt-28 overflow-hidden">
        <div class="container mx-auto px-6 relative z-10 grid grid-cols-1 lg:grid-cols-12 gap-20 items-center">
            
            <div class="lg:col-span-5 z-20 text-center lg:text-left" 
                 x-intersect="$el.classList.add('animate-glass-slide')">
                
                <div class="inline-flex items-center gap-4 bg-aura-dark text-aura-accent px-10 py-4 rounded-full mb-12 shadow-2xl border border-white/10 group overflow-hidden relative">
                    <div class="absolute inset-0 bg-white/10 -translate-x-full group-hover:translate-x-full transition-transform duration-1000"></div>
                    <span class="relative flex h-3 w-3">
                        <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-aura-accent opacity-75"></span>
                        <span class="relative inline-flex rounded-full h-3 w-3 bg-aura-accent"></span>
                    </span>
                    <span class="text-[11px] font-bold uppercase tracking-[0.6em] relative z-10">Edition Protocol • 2026</span>
                </div>

                <h2 class="text-7xl md:text-[10rem] font-serif font-medium leading-[0.8] mb-14 text-aura-dark tracking-tighter">
                    Liquid <br>
                    <span class="italic text-gray-300 luxury-glow">Form.</span>
                </h2>

                <p class="max-w-md mx-auto lg:mx-0 text-gray-500 font-light text-xl leading-relaxed mb-16 border-l-4 border-aura-accent/20 pl-10">
                    Discover a digital flagship where sustainable Javanese silk flows like water. Handcrafted artifacts for the conscious explorer.
                </p>

                <div class="flex flex-col sm:flex-row gap-8 justify-center lg:justify-start">
                    <a href="#shop" class="bg-aura-dark text-white px-20 py-7 rounded-full text-[11px] font-bold uppercase tracking-[0.5em] shadow-2xl hover:bg-aura-accent hover:text-aura-dark transition-all duration-700 transform hover:-translate-y-3 btn-liquid">
                        Enter Shop
                    </a>
                    <button @click="scrollToAbout" class="glass-refracted text-aura-dark px-16 py-7 rounded-full text-[11px] font-bold uppercase tracking-[0.5em] hover:bg-white transition-all duration-700">
                        The Legacy
                    </button>
                </div>
            </div>

            <div class="lg:col-span-7 relative group">
                <div class="relative w-full aspect-[4/5] glass-refracted p-8 rounded-[4.5rem] shadow-2xl animate-float-y transition-all duration-1000 group-hover:scale-[1.03]">
                    <div class="w-full h-full rounded-[3.5rem] overflow-hidden relative shadow-inner">
                        <img src="https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?q=80&w=2000" 
                             alt="Luxury Aura Silk" 
                             class="w-full h-full object-cover transition-transform duration-[4s] group-hover:scale-110 brightness-95">
                        
                        <div class="absolute inset-0 bg-gradient-to-tr from-aura-dark/30 via-transparent to-white/20 mix-blend-soft-light pointer-events-none"></div>
                    </div>

                    <div class="absolute -top-16 -right-12 glass-dark-refracted p-12 rounded-3xl shadow-2xl animate-float-y" style="animation-delay: 1.5s;">
                        <div class="flex items-center gap-6 text-white">
                            <div class="w-16 h-16 rounded-full bg-aura-accent flex items-center justify-center text-aura-dark">
                                <i class="ph-fill ph-plant text-4xl"></i>
                            </div>
                            <div>
                                <p class="text-3xl font-serif font-bold text-aura-accent">100%</p>
                                <p class="text-[10px] uppercase tracking-[0.4em] opacity-40">Bio-Verified</p>
                            </div>
                        </div>
                    </div>

                    <div class="absolute -bottom-12 -left-16 glass-refracted p-10 rounded-[2.5rem] shadow-2xl animate-float-y" style="animation-delay: 3s;">
                        <p class="text-6xl font-serif font-bold text-aura-dark mb-2 luxury-glow italic">Java</p>
                        <p class="text-[11px] text-gray-400 font-bold uppercase tracking-[0.5em]">Direct Source</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="absolute bottom-16 left-12 flex flex-col items-center gap-12 opacity-30 hidden xl:flex">
            <span class="vertical-text uppercase text-[10px] font-bold tracking-[1em] text-aura-dark">Exploration protocol</span>
            <div class="w-px h-48 bg-gradient-to-b from-aura-dark to-transparent animate-pulse"></div>
        </div>
    </section>


    <section class="py-48 bg-transparent border-y border-aura-dark/5">
        <div class="container mx-auto px-6">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-24">
                
                <div class="space-y-10 group" x-intersect="$el.classList.add('animate-glass-slide')">
                    <div class="w-24 h-24 glass-refracted rounded-[2rem] flex items-center justify-center mb-12 group-hover:bg-aura-dark group-hover:text-white transition-all duration-700 transform group-hover:rotate-12">
                        <i class="ph ph-hand-heart text-4xl"></i>
                    </div>
                    <h3 class="text-3xl font-serif text-aura-dark italic">Human Hands.</h3>
                    <p class="text-lg text-gray-500 leading-relaxed font-light">Every artifact is hand-stitched by our collective of master weavers in Yogyakarta, ensuring wages that exceed industry standards by 300%.</p>
                    <div class="h-px w-20 bg-aura-accent/30 group-hover:w-full transition-all duration-1000"></div>
                </div>

                <div class="space-y-10 group" x-intersect="$el.classList.add('animate-glass-slide')" style="animation-delay: 0.2s;">
                    <div class="w-24 h-24 glass-refracted rounded-[2rem] flex items-center justify-center mb-12 group-hover:bg-aura-dark group-hover:text-white transition-all duration-700 transform group-hover:-rotate-12">
                        <i class="ph ph-shield-check text-4xl"></i>
                    </div>
                    <h3 class="text-3xl font-serif text-aura-dark italic">Eco-Integrity.</h3>
                    <p class="text-lg text-gray-500 leading-relaxed font-light">Zero synthetic fibers. Zero toxic dyes. We use volcanic minerals and plant-based pigments to create our signature earth-toned palette.</p>
                    <div class="h-px w-20 bg-aura-accent/30 group-hover:w-full transition-all duration-1000"></div>
                </div>

                <div class="space-y-10 group" x-intersect="$el.classList.add('animate-glass-slide')" style="animation-delay: 0.4s;">
                    <div class="w-24 h-24 glass-refracted rounded-[2rem] flex items-center justify-center mb-12 group-hover:bg-aura-dark group-hover:text-white transition-all duration-700 transform group-hover:rotate-6">
                        <i class="ph ph-infinity text-4xl"></i>
                    </div>
                    <h3 class="text-3xl font-serif text-aura-dark italic">Timeless Cycle.</h3>
                    <p class="text-lg text-gray-500 leading-relaxed font-light">Designed for decades. Our lifetime repair protocol ensures that your Aura pieces evolve with you, reducing global textile waste.</p>
                    <div class="h-px w-20 bg-aura-accent/30 group-hover:w-full transition-all duration-1000"></div>
                </div>

            </div>
        </div>
    </section>


    <main id="shop" class="relative py-60">
        <div class="absolute top-0 right-0 w-128 h-128 bg-aura-accent/5 rounded-full blur-[160px] -z-10"></div>

        <div class="container mx-auto px-6">
            
            <div class="flex flex-col md:flex-row justify-between items-end mb-32 border-b border-aura-dark/5 pb-20 relative">
                <div class="max-w-2xl text-center md:text-left" x-intersect="$el.classList.add('animate-glass-slide')">
                    <span class="text-aura-accent font-bold uppercase tracking-[0.5em] text-[11px] block mb-6">Current Inventory</span>
                    <h2 class="text-7xl md:text-9xl font-serif text-aura-dark mb-10 leading-[0.85]">The Archive<span class="text-gray-200">.</span></h2>
                    <p class="text-gray-400 font-light text-xl leading-relaxed max-w-lg">
                        Meticulously curated drops. Each piece is generated on-demand to ensure zero inventory waste.
                    </p>
                </div>
                
                <div class="mt-16 md:mt-0 glass-refracted p-3 rounded-full flex gap-4 shadow-2xl transform transition-all duration-700 hover:scale-[1.02]">
                    <template x-for="cat in ['All', 'Tops', 'Bottoms', 'Dresses', 'Accessories']">
                        <button @click="activeCategory = cat" 
                                :class="activeCategory === cat ? 'bg-aura-dark text-white shadow-2xl scale-105' : 'hover:bg-aura-base text-gray-400 hover:text-aura-dark'"
                                class="px-14 py-5 rounded-full text-[11px] font-bold uppercase tracking-[0.4em] transition-all duration-700 ease-[cubic-bezier(0.16,1,0.3,1)]"
                                x-text="cat"></button>
                    </template>
                </div>
            </div>

            <div x-show="productsLoading" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-16">
                <template x-for="i in 4">
                    <div class="glass-refracted p-6 rounded-[3.5rem] space-y-10">
                        <div class="aspect-[3/4] rounded-[2.5rem] skeleton-shimmer"></div>
                        <div class="space-y-4 px-4 pb-4">
                            <div class="h-8 skeleton-shimmer w-3/4 rounded-lg"></div>
                            <div class="h-5 skeleton-shimmer w-1/4 rounded-lg"></div>
                        </div>
                    </div>
                </template>
            </div>

            <div x-show="!productsLoading" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-x-12 gap-y-32" x-cloak>
                <template x-for="product in filteredProducts" :key="product.id">
                    <div class="group flex flex-col h-full animate-glass-slide">
                        
                        <div class="glass-refracted p-6 rounded-[3.5rem] transition-all duration-1000 group-hover:shadow-[0_40px_80px_rgba(0,0,0,0.1)] group-hover:-translate-y-10 relative overflow-hidden">
                            
                            <div class="relative aspect-[3/4] overflow-hidden rounded-[2.5rem] bg-aura-base mb-10 shadow-inner cursor-pointer">
                                <img :src="product.image" 
                                     class="w-full h-full object-cover transition-transform duration-[3s] ease-out group-hover:scale-110 group-hover:rotate-1">
                                
                                <div class="absolute top-8 left-8 flex flex-col gap-4 z-10 pointer-events-none">
                                    <span x-show="product.badge" class="glass-dark-refracted text-aura-accent text-[10px] font-bold uppercase tracking-[0.5em] px-7 py-3 rounded-full border border-white/10 shadow-2xl" x-text="product.badge"></span>
                                    <span x-show="product.is_new" class="bg-white/95 text-aura-dark text-[10px] font-bold uppercase tracking-[0.5em] px-7 py-3 rounded-full shadow-2xl">Limited Drop</span>
                                </div>

                                <div class="absolute inset-x-0 bottom-0 p-12 translate-y-full group-hover:translate-y-0 transition-transform duration-[0.8s] ease-[cubic-bezier(0.16,1,0.3,1)] glass-dark-refracted border-t border-white/5">
                                    <p class="text-[10px] uppercase font-bold text-aura-accent mb-8 text-center tracking-[0.6em] opacity-50">Architectural Size</p>
                                    <div class="flex justify-center gap-6">
                                        <template x-for="size in ['S', 'M', 'L']">
                                            <button @click="addToCart(product, size)" 
                                                    class="w-16 h-16 rounded-full border border-aura-accent/30 text-aura-accent hover:bg-aura-accent hover:text-aura-dark transition-all duration-700 text-[12px] font-bold shadow-2xl hover:scale-110 active:scale-90">
                                                <span x-text="size"></span>
                                            </button>
                                        </template>
                                    </div>
                                    <p class="text-[9px] text-white/20 text-center mt-8 uppercase tracking-[0.4em]">Real-time Bag Synchronization</p>
                                </div>
                            </div>

                            <div class="flex justify-between items-start px-6 pb-6">
                                <div class="space-y-4">
                                    <h3 class="font-serif text-3xl text-aura-dark group-hover:text-aura-accent transition-colors duration-700 cursor-pointer" x-text="product.name"></h3>
                                    <p class="text-[11px] text-gray-400 uppercase tracking-[0.6em] font-bold" x-text="product.category"></p>
                                </div>
                                <div class="text-right">
                                    <p class="font-bold text-2xl font-serif text-aura-dark group-hover:scale-110 transition-transform duration-700 origin-right" x-text="formatMoney(product.price)"></p>
                                    <div class="flex items-center gap-2 justify-end mt-4 text-aura-success">
                                        <i class="ph-fill ph-truck text-lg"></i>
                                        <span class="text-[9px] font-bold uppercase tracking-widest">Secured Delivery</span>
                                    </div>
                                </div>
                            </div>

                            <template x-if="isAdmin">
                                <a href="admin.html" class="absolute top-8 right-8 w-14 h-14 bg-aura-dark text-aura-accent rounded-full flex items-center justify-center shadow-2xl border border-white/20 opacity-0 group-hover:opacity-100 transition-all duration-500 scale-50 group-hover:scale-100 hover:bg-aura-accent hover:text-aura-dark">
                                    <i class="ph-bold ph-pencil-simple text-2xl"></i>
                                </a>
                            </template>
                        </div>
                    </div>
                </template>
            </div>

            <div x-show="!productsLoading && filteredProducts.length === 0" class="py-48 text-center glass-refracted rounded-[5rem] animate-glass-slide" x-cloak>
                <div class="max-w-xl mx-auto space-y-12">
                    <div class="w-32 h-32 bg-aura-base rounded-full flex items-center justify-center mx-auto shadow-2xl border border-aura-sand">
                        <i class="ph ph-selection-background text-6xl text-gray-300"></i>
                    </div>
                    <h3 class="text-5xl font-serif text-aura-dark italic">Archive Re-Syncing.</h3>
                    <p class="text-gray-400 font-light text-lg leading-relaxed px-10">
                        The requested category is currently being hand-woven by our artisans. Please adjust your discovery protocol or check back during the next lunar cycle.
                    </p>
                    <button @click="activeCategory = 'All'" class="text-[12px] font-bold uppercase tracking-[0.6em] text-aura-accent border-b-2 border-aura-accent/20 pb-2 hover:text-aura-dark hover:border-aura-dark transition-all duration-700">Clear Search Filter</button>
                </div>
            </div>

        </div>
    </main>

    <section id="story" class="bg-aura-dark text-white py-60 relative overflow-hidden">
        
        <div class="absolute top-0 right-0 w-full h-full opacity-10 pointer-events-none">
            <div class="absolute inset-0 bg-gradient-to-bl from-white/20 via-transparent to-transparent"></div>
        </div>

        <div class="container mx-auto px-6 relative z-10">
            <div class="flex flex-col lg:flex-row items-center gap-40">
                
                <div class="w-full lg:w-1/2 relative group">
                    <div class="glass-refracted p-10 rounded-[5rem] border-white/5 transition-all duration-[2s] group-hover:rotate-1 shadow-2xl" 
                         x-intersect="$el.classList.add('animate-glass-slide')">
                        <img src="https://images.unsplash.com/photo-1544441893-675973e31985?q=80&w=2070" 
                             alt="Artisan Looming" 
                             class="w-full h-[800px] object-cover rounded-[4rem] grayscale group-hover:grayscale-0 transition-all duration-[2.5s] scale-105 group-hover:scale-100">
                        
                        <div class="absolute -top-20 -right-20 glass-dark-refracted p-14 rounded-[3rem] shadow-2xl animate-float-y">
                            <p class="text-[11px] font-bold uppercase tracking-[0.6em] text-aura-accent mb-6 block">Fiber Standard</p>
                            <h4 class="text-5xl font-serif font-bold text-white mb-4 italic">GOTS 7.0</h4>
                            <p class="text-sm text-white/30 max-w-[150px] leading-relaxed font-light">Verified organic traceability for every thread used in the archive.</p>
                        </div>
                    </div>
                </div>

                <div class="w-full lg:w-1/2 space-y-20">
                    <div x-intersect="$el.classList.add('animate-glass-slide')">
                        <div class="flex items-center gap-8 mb-12">
                            <span class="text-aura-accent font-bold uppercase tracking-[0.8em] text-xs">Our Narrative</span>
                            <div class="h-px w-32 bg-aura-accent/30 animate-pulse"></div>
                        </div>
                        <h2 class="text-7xl md:text-[6.5rem] font-serif leading-[0.85] mb-16 tracking-tighter">
                            Soul in <br>
                            <span class="text-transparent bg-clip-text bg-gradient-to-r from-aura-accent to-yellow-100 luxury-glow">The Machine.</span>
                        </h2>
                        <div class="space-y-10 text-white/50 text-2xl font-light leading-relaxed max-w-xl">
                            <p>
                                Aura was forged in the volcanic highlands of Central Java. We do not manufacture; we cultivate. Every garment represents a lineage of artisan knowledge passed down through generations of master weavers.
                            </p>
                            <p>
                                Our design language is a silent protest against the noise of fast fashion. We choose form over trend, quality over speed, and heritage over synthetic waste.
                            </p>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-20 pt-20 border-t border-white/5" x-intersect="$el.classList.add('animate-glass-slide')">
                        <div class="space-y-4">
                            <p class="text-7xl font-serif text-aura-accent luxury-glow">68+</p>
                            <p class="text-[11px] uppercase tracking-[0.5em] text-white/30 font-bold leading-relaxed">Collaborative <br>Artisan Families</p>
                        </div>
                        <div class="space-y-4">
                            <p class="text-7xl font-serif text-aura-accent luxury-glow">22k</p>
                            <p class="text-[11px] uppercase tracking-[0.5em] text-white/30 font-bold leading-relaxed">Liters of Water <br>Recovered in 2026</p>
                        </div>
                        <div class="space-y-4">
                            <p class="text-7xl font-serif text-aura-accent luxury-glow">0%</p>
                            <p class="text-[11px] uppercase tracking-[0.5em] text-white/30 font-bold leading-relaxed">Synthetic Waste <br>In Lifecycle</p>
                        </div>
                        <div class="space-y-4">
                            <p class="text-7xl font-serif text-aura-accent luxury-glow">Java</p>
                            <p class="text-[11px] uppercase tracking-[0.5em] text-white/30 font-bold leading-relaxed">Central Design <br>Laboratories</p>
                        </div>
                    </div>

                    <div class="pt-16">
                        <button class="inline-flex items-center gap-10 group">
                            <span class="text-aura-accent uppercase font-bold tracking-[0.6em] text-xs group-hover:text-white transition-all duration-700">Thanks for your support</span>
                            </div>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <div class="relative z-[300]" x-show="cartOpen" x-cloak>
        <div class="fixed inset-0 bg-aura-dark/70 backdrop-blur-2xl transition-opacity duration-1000" 
             x-show="cartOpen" @click="cartOpen = false"
             x-transition:enter="ease-out duration-700" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100"
             x-transition:leave="ease-in duration-500" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0"></div>

        <div class="fixed inset-y-0 right-0 w-full max-w-lg flex flex-col transform transition-all duration-1000 ease-[cubic-bezier(0.16,1,0.3,1)]"
             x-show="cartOpen" x-transition:enter="translate-x-full" x-transition:enter-end="translate-x-0"
             x-transition:leave="translate-x-0" x-transition:leave-end="translate-x-full">
            
            <div class="h-full flex flex-col glass-dark-refracted shadow-2xl overflow-hidden relative border-l border-white/5">
                
                <div class="p-12 flex justify-between items-center border-b border-white/5 bg-white/5">
                    <div>
                        <h3 class="text-3xl font-serif font-bold text-white tracking-[0.3em] uppercase">The Selection</h3>
                        <p class="text-[10px] uppercase tracking-[0.5em] text-aura-accent font-bold mt-3" 
                           x-text="cartCount + ' Preserved Artifacts'"></p>
                    </div>
                    <button @click="cartOpen = false" class="text-white/20 hover:text-aura-error transition-all duration-700 group">
                        <i class="ph ph-x-circle text-5xl transform group-hover:rotate-180"></i>
                    </button>
                </div>

                <div class="flex-1 overflow-y-auto p-12 custom-scroll space-y-12">
                    <div x-show="cartLoading" class="absolute inset-0 bg-aura-dark/60 z-20 flex items-center justify-center backdrop-blur-md">
                        <div class="w-16 h-16 border-4 border-aura-accent border-t-transparent rounded-full animate-spin"></div>
                    </div>

                    <div x-show="cart.length === 0" class="text-center py-48 opacity-20">
                        <i class="ph ph-tote text-8xl mb-8"></i>
                        <p class="font-serif italic text-2xl tracking-widest">Bag is currently void.</p>
                    </div>
                    
                    <ul class="space-y-16">
                        <template x-for="(item, index) in cart" :key="index">
                            <li class="flex gap-10 group animate-glass-slide">
                                <div class="w-32 h-44 rounded-3xl overflow-hidden border border-white/10 flex-shrink-0 shadow-2xl transition-all duration-700 group-hover:scale-105 group-hover:rotate-1">
                                    <img :src="item.image" class="w-full h-full object-cover">
                                </div>
                                <div class="flex-1 flex flex-col justify-between py-2">
                                    <div>
                                        <div class="flex justify-between items-start">
                                            <h4 x-text="item.name" class="font-serif font-bold text-white text-2xl pr-4"></h4>
                                            <p x-text="formatMoney(item.price * item.quantity)" class="text-lg font-bold text-aura-accent"></p>
                                        </div>
                                        <div class="flex items-center gap-6 mt-6">
                                            <p class="text-[10px] text-white/40 font-bold uppercase tracking-[0.4em]">Size <span x-text="item.size" class="text-white ml-3 bg-white/10 px-3 py-1 rounded-full"></span></p>
                                            <p class="text-[10px] text-white/40 font-bold uppercase tracking-[0.4em]">Qty <span x-text="item.quantity" class="text-white ml-3 bg-white/10 px-3 py-1 rounded-full"></span></p>
                                        </div>
                                    </div>
                                    <button @click="removeFromCart(index, item)" 
                                            class="text-aura-error/60 text-[10px] font-bold uppercase tracking-[0.4em] hover:text-aura-error transition-all text-left underline underline-offset-8">Void Selection</button>
                                </div>
                            </li>
                        </template>
                    </ul>
                </div>

                <div class="p-12 bg-white/5 border-t border-white/5 shadow-[0_-30px_60px_rgba(0,0,0,0.3)]">
                    <div class="flex justify-between items-end mb-12">
                        <div class="space-y-3">
                            <p class="text-[11px] font-bold uppercase text-white/30 tracking-[0.6em]">Estimated Settlement</p>
                            <h4 class="text-5xl font-serif font-bold text-white luxury-glow" x-text="formatMoney(cartTotal)"></h4>
                        </div>
                        <div class="text-right">
                            <p class="text-[11px] font-bold text-aura-success uppercase tracking-[0.3em]">Complimentary Logistics</p>
                        </div>
                    </div>
                    
                    <a href="checkout.html" class="block w-full bg-aura-accent text-aura-dark py-8 rounded-[2rem] text-center text-xs font-bold uppercase tracking-[0.6em] hover:bg-white transition-all duration-1000 shadow-2xl active:scale-[0.97] btn-liquid">
                        Authorize Transaction
                    </a>
                </div>
            </div>
        </div>
    </div>


    <footer class="bg-white pt-56 pb-20 relative overflow-hidden border-t border-aura-dark/5">
        <div class="absolute bottom-0 right-0 w-128 h-128 bg-aura-accent/10 rounded-full blur-[160px] -z-10"></div>
        
        <div class="container mx-auto px-6">
            <div class="grid grid-cols-1 lg:grid-cols-6 gap-32 mb-40">
                
                <div class="lg:col-span-2 space-y-16">
                    <div>
                        <a href="#" class="text-5xl font-serif font-bold tracking-[0.4em] uppercase text-aura-dark block mb-10 transition-all hover:tracking-[0.5em]">AURA<span class="text-aura-accent">.</span></a>
                        <p class="text-gray-400 text-lg leading-relaxed max-w-sm font-light">
                            Synthesizing a sustainable future through the intersection of Indonesian heritage and high-performance digital logic. Every thread is a signature.
                        </p>
                    </div>
                    
                    <div class="flex gap-10">
                        <template x-for="icon in ['instagram-logo', 'tiktok-logo', 'pinterest-logo']">
                            <a href="#" class="w-16 h-16 rounded-full glass-refracted flex items-center justify-center hover:bg-aura-dark hover:text-white transition-all duration-1000 transform hover:-translate-y-3">
                                <i :class="'ph-fill ph-' + icon" class="text-3xl"></i>
                            </a>
                        </template>
                    </div>
                </div>

                <div class="space-y-12">
                    <h5 class="text-[11px] font-bold uppercase tracking-[0.6em] text-aura-accent">Discovery</h5>
                    <ul class="space-y-8 text-sm text-gray-400 font-bold tracking-[0.3em] uppercase">
                        <li><a href="#shop" class="hover:text-aura-dark transition-all duration-500">Current Archive</a></li>
                        <li><a href="catalog.html" class="hover:text-aura-dark transition-all duration-500">Global Catalog</a></li>
                        <li><a href="#" class="hover:text-aura-dark transition-all duration-500">Gift Protocol</a></li>
                    </ul>
                </div>

                <div class="space-y-12">
                    <h5 class="text-[11px] font-bold uppercase tracking-[0.6em] text-aura-accent">The Firm</h5>
                    <ul class="space-y-8 text-sm text-gray-400 font-bold tracking-[0.3em] uppercase">
                        <li><a href="#story" class="hover:text-aura-dark transition-all duration-500">Artisan Legacy</a></li>
                        <li><a href="#" class="hover:text-aura-dark transition-all duration-500">Impact Dossier</a></li>
                        <li><a href="#" class="hover:text-aura-dark transition-all duration-500">Sustainability</a></li>
                    </ul>
                </div>

                <div class="lg:col-span-2 space-y-12">
                    <h5 class="text-[11px] font-bold uppercase tracking-[0.6em] text-aura-accent">Intake Portal</h5>
                    <p class="text-sm text-gray-400 leading-relaxed font-light uppercase tracking-widest">Subscribe to receive technical bulletins on new drops and heritage preservation reports.</p>
                    <div class="relative group">
                        <input type="email" placeholder="IDENTITY@EMAIL.COM" 
                               class="bg-transparent border-b-2 border-gray-100 py-6 w-full text-xs outline-none focus:border-aura-dark transition-all duration-1000 font-bold tracking-[0.4em]">
                        <button class="absolute right-0 top-1/2 -translate-y-1/2 text-aura-accent hover:text-aura-dark transition-all duration-500 font-bold uppercase text-[10px] tracking-[0.4em]">Authorize</button>
                    </div>
                </div>
            </div>

            <div class="pt-20 border-t border-gray-100 flex flex-col lg:flex-row justify-between items-center text-[10px] uppercase tracking-[0.6em] text-gray-300 gap-12">
                <div class="flex flex-col md:flex-row gap-16 items-center">
                    <p>&copy; 2026 Aura Apparel Global Systems.</p>
                    <div class="hidden md:block h-5 w-px bg-gray-200"></div>
                    <p>Designed and Handcrafted in Java, Indonesia.</p>
                </div>
                <div class="flex gap-14">
                    <a href="#" class="hover:text-aura-dark transition-all">Privacy Protocol</a>
                    <a href="#" class="hover:text-aura-dark transition-all">Terms of Use</a>
                </div>
            </div>
        </div>
    </footer>


    <script>
        function auraTitan() {
            return {
                /* --- I. SYSTEM STATES --- */
                supabase: null,
                session: null,
                isAdmin: false,
                scrolled: false,
                mobileMenuOpen: false,
                cartOpen: false,
                cartLoading: false,
                productsLoading: true,
                
                /* --- II. DATA REPOSITORIES --- */
                products: [],
                activeCategory: 'All',
                cart: [],
                toasts: [],

                /* --- III. COMPUTED INTELLIGENCE --- */
                get cartTotal() { 
                    return this.cart.reduce((sum, item) => sum + (item.price * item.quantity), 0); 
                },
                get cartCount() { 
                    return this.cart.reduce((sum, item) => sum + item.quantity, 0); 
                },
                get filteredProducts() {
                    if (this.activeCategory === 'All') return this.products;
                    return this.products.filter(p => p.category === this.activeCategory);
                },

                /* --- IV. BOOT SEQUENCE --- */
                init() {
                    // Global Event: Performance-tuned Scroll Listener
                    window.addEventListener('scroll', () => { 
                        this.scrolled = window.scrollY > 100; 
                    });
                    
                    this.establishSecureConnection();
                },

                /** Initializes the cloud database instance */
                async establishSecureConnection() {
                    const SB_URL = 'https://xenosyklkpisszqwibdw.supabase.co';
                    const SB_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inhlbm9zeWtsa3Bpc3N6cXdpYmR3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA4NTkxNzcsImV4cCI6MjA4NjQzNTE3N30.A_WVC9GRa7USe2DPbzVUWw3TuBHnyImVqBZnzuPJbMw';
                    
                    this.supabase = supabase.createClient(SB_URL, SB_KEY);
                    
                    // Parallel data synchronization
                    await Promise.all([
                        this.syncGlobalInventory(),
                        this.validateSecurityIdentity()
                    ]);
                },

                /* --- V. CORE DATABASE LOGIC --- */
                async syncGlobalInventory() {
                    this.productsLoading = true;
                    try {
                        const { data, error } = await this.supabase
                            .from('products')
                            .select('*')
                            .order('created_at', { ascending: false });
                        
                        if (error) throw error;
                        this.products = data || [];
                    } catch (err) {
                        console.error('Inventory Error:', err);
                        this.showToast('System Notice', 'Global inventory sync failed.', 'error');
                    } finally {
                        this.productsLoading = false;
                    }
                },

                async validateSecurityIdentity() {
                    const { data: { session } } = await this.supabase.auth.getSession();
                    this.gatewayProcess(session);
                    
                    // Real-time Auth stream
                    this.supabase.auth.onAuthStateChange((_, s) => {
                        this.gatewayProcess(s);
                    });
                },

                async gatewayProcess(session) {
                    this.session = session;
                    // Secure Admin Verification
                    this.isAdmin = session && session.user.email === 'dashwebtr3@gmail.com';
                    
                    if (session) {
                        await this.mergeLocalToCloud();
                        await this.pullCloudArchive();
                    } else {
                        this.hydrateLocalArchive();
                    }
                },

                /* --- VI. COMMERCE TRANSACTIONS --- */
                async addToCart(product, size) {
                    this.cartOpen = true;
                    if (!this.session) {
                        this.localStore(product, size);
                    } else {
                        await this.cloudStore(product, size);
                    }
                },

                localStore(product, size) {
                    const exists = this.cart.find(i => i.id === product.id && i.size === size);
                    if (exists) {
                        exists.quantity++;
                    } else {
                        this.cart.push({...JSON.parse(JSON.stringify(product)), size, quantity: 1});
                    }
                    this.persistLocal();
                    this.showToast('Bag Synchronized', `${product.name} preserved.`);
                },

                async cloudStore(product, size) {
                    this.cartLoading = true;
                    try {
                        const exists = this.cart.find(i => i.id === product.id && i.size === size);
                        const qty = exists ? exists.quantity + 1 : 1;

                        const { error } = await this.supabase
                            .from('cart_items')
                            .upsert({
                                user_id: this.session.user.id,
                                product_id: product.id,
                                size: size,
                                quantity: qty
                            }, { onConflict: 'user_id, product_id, size' });

                        if (error) throw error;
                        await this.pullCloudArchive();
                        this.showToast('Cloud Sync Success', `${product.name} saved to account.`);
                    } catch (e) {
                        this.showToast('Sync Failed', 'Could not save to secure profile.', 'error');
                    } finally {
                        this.cartLoading = false;
                    }
                },

                async pullCloudArchive() {
                    const { data, error } = await this.supabase.from('cart_items').select('*');
                    if (error) return;

                    this.cart = data.map(dbItem => {
                        const meta = this.products.find(p => p.id === dbItem.product_id);
                        return meta ? {...meta, size: dbItem.size, quantity: dbItem.quantity} : null;
                    }).filter(Boolean);
                },

                async mergeLocalToCloud() {
                    const data = JSON.parse(localStorage.getItem('aura_titan_v6') || '[]');
                    if (data.length > 0) {
                        this.showToast('Integrating Archive', 'Merging selections...');
                        for(const item of data) await this.cloudStore(item, item.size);
                        localStorage.removeItem('aura_titan_v6');
                    }
                },

                async removeFromCart(idx, item) {
                    this.cartLoading = true;
                    if(!this.session) {
                        this.cart.splice(idx, 1);
                        this.persistLocal();
                    } else {
                        await this.supabase.from('cart_items').delete().match({
                            user_id: this.session.user.id, product_id: item.id, size: item.size
                        });
                        this.cart.splice(idx, 1);
                    }
                    this.cartLoading = false;
                },

                /* --- VII. UTILITY & UI --- */
                persistLocal() { localStorage.setItem('aura_titan_v6', JSON.stringify(this.cart)); },
                hydrateLocalArchive() { this.cart = JSON.parse(localStorage.getItem('aura_titan_v6') || '[]'); },
                
                async logout() { 
                    await this.supabase.auth.signOut(); 
                    this.cart = []; 
                    this.isAdmin = false;
                    this.showToast('Secure Exit', 'Identity cleared.');
                },
                
                formatMoney(amount) { 
                    return new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR', maximumSignificantDigits: 9 }).format(amount); 
                },

                showToast(title, message, type = 'success') {
                    const id = Date.now();
                    this.toasts.push({ id, title, message, type, visible: true });
                    setTimeout(() => {
                        const t = this.toasts.find(x => x.id === id);
                        if(t) t.visible = false;
                        setTimeout(() => { this.toasts = this.toasts.filter(x => x.id !== id); }, 600);
                    }, 4000);
                },

                removeToast(id) {
                    this.toasts = this.toasts.filter(x => x.id !== id);
                },

                scrollToAbout() {
                    document.getElementById('story').scrollIntoView({ behavior: 'smooth' });
                }
            }
        }
    </script>
</body>
</html>


